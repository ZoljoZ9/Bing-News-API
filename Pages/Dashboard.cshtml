@page
@model Info.Pages.DashboardModel
@{
    ViewData["Title"] = "Dashboard";
}

<div class="container1">
    <h1>Welcome, @Model.Username!</h1>
    <p>Your email: @Model.Email</p>

    <p>This is your personalized dashboard. Search for topics of your interest below.</p>

    <!-- Search Form -->
    <form method="get" action="/Dashboard">
        <input type="text" class="input-field" name="searchQuery" placeholder="Search your favorite topic" value="@Request.Query["searchQuery"]" required />
        <button type="submit" class="btn btn-primary">Search</button>
    </form>

    <!-- Scrollable Search Results -->
    @if (Model.NewsArticles != null && Model.NewsArticles.Count > 0)
    {
        <div class="scrollable-results">
            <h2>Search Results</h2>
            <ul>
                @foreach (var article in Model.NewsArticles)
                {
                    <li>
                        <a href="@article.url" target="_blank">@article.name</a>
                        <p>@article.description</p>
                    </li>
                }
            </ul>
        </div>

        <!-- Pagination -->
        <nav aria-label="Page navigation">
            <ul class="pagination">
                @if (Model.PageNumber > 1)
                {
                    <li>
                        <a href="/Dashboard?searchQuery=@Model.SearchQuery&pageNumber=@(Model.PageNumber - 1)">
                            Previous
                        </a>
                    </li>
                }
                @for (int i = 1; i <= Model.TotalPages; i++)
                {
                    <li class="@(i == Model.PageNumber ? "active" : "")">
                        <a href="/Dashboard?searchQuery=@Model.SearchQuery&pageNumber=@i">
                            @i
                        </a>
                    </li>
                }
                @if (Model.PageNumber < Model.TotalPages)
                {
                    <li>
                        <a href="/Dashboard?searchQuery=@Model.SearchQuery&pageNumber=@(Model.PageNumber + 1)">
                            Next
                        </a>
                    </li>
                }
            </ul>
        </nav>
    }
    else if (!string.IsNullOrEmpty(ViewData["Message"] as string))
    {
        <p>@ViewData["Message"]</p>
    }
</div>
